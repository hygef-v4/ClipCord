const _0x5140fb=_0x48ee;(function(_0x53e476,_0x5be8d7){const _0x50b7af=_0x48ee,_0x18911f=_0x53e476();while(!![]){try{const _0x44f0ee=parseInt(_0x50b7af(0x125))/0x1+parseInt(_0x50b7af(0x16a))/0x2*(parseInt(_0x50b7af(0x10e))/0x3)+-parseInt(_0x50b7af(0x15b))/0x4*(parseInt(_0x50b7af(0x104))/0x5)+parseInt(_0x50b7af(0x112))/0x6+-parseInt(_0x50b7af(0x15d))/0x7+-parseInt(_0x50b7af(0x162))/0x8*(parseInt(_0x50b7af(0x12d))/0x9)+parseInt(_0x50b7af(0x15e))/0xa;if(_0x44f0ee===_0x5be8d7)break;else _0x18911f['push'](_0x18911f['shift']());}catch(_0x5c6351){_0x18911f['push'](_0x18911f['shift']());}}}(_0x5033,0x3d884),console[_0x5140fb(0x138)](_0x5140fb(0x181)));function _0x5033(){const _0x2c8459=['found','string','Download\x20error:\x20','[Persistence]\x20Tab\x20','DOWNLOAD_SINGLE_URL','\x20before\x20new\x20scan.','START_SCAN','replace','lastError','SCAN_COMPLETE','DOWNLOAD_SINGLE_URL\x20message\x20missing\x20URL\x20or\x20Folder\x20Name\x20(or\x20folder\x20is\x20not\x20a\x20string)','status','not_found','Attempting\x20to\x20inject\x20content\x20script\x20into\x20tab\x20','4iRjtyx','[Persistence]\x20Error\x20checking\x20tab\x20','2665299HphXCz','1229020zbTniC','includes','Single\x20download\x20failed\x20for\x20','discord.com/channels/','177296vbxCHC','error','startsWith','DOWNLOAD_ALL_URLS\x20message\x20missing/invalid\x20URLs\x20array\x20or\x20Folder\x20Name\x20(or\x20folder\x20is\x20not\x20a\x20string)','toLowerCase','Error\x20initiating\x20download\x20for\x20URL\x20#','forEach','\x20URLs\x20into\x20folder\x20\x22','452708ARlQBR','addListener','pageUrl','\x20started\x20successfully.','Error\x20reported\x20from\x20content\x20script:','Single\x20download\x20','GET_RESULTS_FOR_TAB','success','\x20removed.','urls','getManifest','endsWith','Received\x20DISCORD_CLIP_URLS\x20without\x20proper\x20sender\x20info.','[Persistence]\x20No\x20stored\x20results\x20found\x20for\x20tab\x20','download','[Persistence]\x20Storing\x20','Initiated\x20','Background\x20received\x20unhandled\x20message\x20type:','length','\x20as\x20','Missing\x20URL\x20or\x20Invalid\x20Folder\x20Name','SCAN_STARTED','scripting','Background\x20service\x20worker\x20started\x20(v1.7\x20-\x20Persistence).',',\x20clearing\x20results:','\x20are\x20stale\x20(URL\x20mismatch\x20or\x20tab\x20closed).\x20Clearing.','1400575FhBmcE','START_SCAN\x20message\x20missing\x20tabId','tabs','random','Content\x20script\x20injected\x20successfully\x20into\x20tab\x20','\x20errors\x20during\x20initiation.','Script\x20injection\x20failed\x20for\x20tab\x20','\x20errors).','CONTENT_SCRIPT_ERROR','Skipping\x20invalid\x20URL\x20at\x20index\x20','6qoHRfz','url','Missing\x20tabId','[Persistence]\x20Clearing\x20old\x20results\x20for\x20tab\x20','1943424IjRAWj','Bulk\x20download\x20item\x20failed\x20(','uniquify','test','get','Popup\x20likely\x20closed\x20when\x20sending\x20SCAN_STARTED:','now','version','reason','SanitizedFolderName','tabId',').\x20Version:\x20','pathname','tab','Could\x20not\x20send\x20SCAN_COMPLETE\x20to\x20popup:','downloads','.\x20Waiting\x20for\x20results...','No\x20data\x20stored','[Persistence]\x20Clearing\x20stored\x20results\x20for\x20tab\x20','79880tPEjRu','onInstalled','):\x20','content-script.js','DOWNLOAD_ALL_URLS','message','onStartup','complete','27vDLusU','[Persistence]\x20Stored\x20results\x20for\x20tab\x20','\x20navigated\x20or\x20changed\x20URL\x20significantly.\x20Clearing\x20results.','Initiating\x20bulk\x20download\x20for\x20','[LifeCycle]\x20Extension\x20installed/updated\x20(','Could\x20not\x20parse\x20URL\x20for\x20base\x20filename:','folder','Popup\x20likely\x20closed\x20when\x20sending\x20SCAN_ERROR:','split','match','from','log',':\x20No\x20downloadId\x20returned\x20and\x20no\x20error.','onUpdated','substring','onMessage','popup/other','Could\x20not\x20send\x20SCAN_ERROR\x20to\x20popup:','SCAN_ERROR','Unknown\x20error\x20in\x20content\x20script.','pop','catch','sendMessage','warn','runtime','InvalidFolderName','trim','clip-','DISCORD_CLIP_URLS','Invalid\x20URLs\x20array\x20or\x20Folder\x20Name','Script\x20injection\x20failed:\x20','Background\x20received\x20message:\x20'];_0x5033=function(){return _0x2c8459;};return _0x5033();}let scanResultsByTab={};function sanitizeFolderName(_0x5d7918){const _0x2ffd3a=_0x5140fb;if(!_0x5d7918||typeof _0x5d7918!=='string')return _0x2ffd3a(0x146);let _0x2e2b17=_0x5d7918[_0x2ffd3a(0x147)]()[_0x2ffd3a(0x154)](/^[./\\ ]+/,'')[_0x2ffd3a(0x154)](/[./\\ ]+$/,'');_0x2e2b17=_0x2e2b17[_0x2ffd3a(0x154)](/[<>:"/\\|?*~]/g,'_'),_0x2e2b17=_0x2e2b17[_0x2ffd3a(0x154)](/\.\./g,'_');const _0x2b10f2=0x32;return _0x2e2b17=_0x2e2b17[_0x2ffd3a(0x13b)](0x0,_0x2b10f2),_0x2e2b17||_0x2ffd3a(0x11b);}function generateBaseFilename(_0x9da2b6){const _0xcee811=_0x5140fb;let _0x385ce9=_0xcee811(0x148)+Date['now']()+'-'+Math[_0xcee811(0x107)]()['toString'](0x10)[_0xcee811(0x13b)](0x2,0x8);try{const _0x157319=new URL(_0x9da2b6),_0x1ce587=_0x157319[_0xcee811(0x11e)]['split']('/');let _0x544d13=_0x1ce587[_0xcee811(0x141)]()||'';_0x544d13=_0x544d13[_0xcee811(0x135)]('?')[0x0];const _0x54d776=_0x544d13[_0xcee811(0x17c)]>0x1&&_0x544d13[_0xcee811(0x15f)]('.')&&!_0x544d13[_0xcee811(0x164)]('.');if(_0x544d13&&_0x54d776){const _0x3bf4db=decodeURIComponent(_0x544d13),_0x21763e=_0x3bf4db['replace'](/[<>:"/\\|?*]/g,'_'),_0x2e1f59=0x64;_0x385ce9=_0x21763e[_0xcee811(0x13b)](0x0,_0x2e1f59);}}catch(_0x7d5ef8){console['warn'](_0xcee811(0x132),_0x9da2b6,_0x7d5ef8);}const _0x16cc38=_0x9da2b6[_0xcee811(0x136)](/\.(mp4|webm|mkv|avi|mov|flv|wmv)(\?|$)/i);if(_0x16cc38&&_0x16cc38[0x1]){const _0x34fbe0='.'+_0x16cc38[0x1][_0xcee811(0x166)]();!_0x385ce9['toLowerCase']()[_0xcee811(0x175)](_0x34fbe0)&&(_0x385ce9=_0x385ce9['replace'](/\.[^.]+$/,'')+_0x34fbe0);}else!/\.(mp4|webm|mkv|avi|mov|flv|wmv)$/i[_0xcee811(0x115)](_0x385ce9)&&(_0x385ce9+='.mp4');return _0x385ce9;}function clearTabResults(_0x53efe3){const _0xe7384f=_0x5140fb;scanResultsByTab[_0x53efe3]&&(console['log'](_0xe7384f(0x124)+_0x53efe3),delete scanResultsByTab[_0x53efe3]);}function _0x48ee(_0xf4a872,_0x5b2414){const _0x503326=_0x5033();return _0x48ee=function(_0x48ee75,_0x322737){_0x48ee75=_0x48ee75-0x104;let _0xe5885=_0x503326[_0x48ee75];return _0xe5885;},_0x48ee(_0xf4a872,_0x5b2414);}function isDiscordChannelUrl(_0x5b0d26){const _0x2c2397=_0x5140fb;return _0x5b0d26&&typeof _0x5b0d26===_0x2c2397(0x14e)&&_0x5b0d26[_0x2c2397(0x15f)](_0x2c2397(0x161));}chrome[_0x5140fb(0x145)][_0x5140fb(0x13c)][_0x5140fb(0x16b)]((_0x25736a,_0x1050da,_0x54451d)=>{const _0x3ed5d2=_0x5140fb;console[_0x3ed5d2(0x138)](_0x3ed5d2(0x14c)+_0x25736a['type'],_0x3ed5d2(0x137),_0x1050da[_0x3ed5d2(0x11f)]?'tab\x20'+_0x1050da[_0x3ed5d2(0x11f)]['id']:_0x3ed5d2(0x13d));let _0x3e3c23=![];switch(_0x25736a['type']){case _0x3ed5d2(0x153):if(_0x25736a[_0x3ed5d2(0x11c)]){const _0x3338cd=_0x25736a[_0x3ed5d2(0x11c)];console['log'](_0x3ed5d2(0x111)+_0x3338cd+_0x3ed5d2(0x152)),clearTabResults(_0x3338cd),console[_0x3ed5d2(0x138)](_0x3ed5d2(0x15a)+_0x3338cd),chrome[_0x3ed5d2(0x180)]['executeScript']({'target':{'tabId':_0x3338cd},'files':[_0x3ed5d2(0x128)]},_0x2c39e5=>{const _0x35a920=_0x3ed5d2;chrome[_0x35a920(0x145)][_0x35a920(0x155)]?(console[_0x35a920(0x163)](_0x35a920(0x10a)+_0x3338cd+':',chrome['runtime'][_0x35a920(0x155)][_0x35a920(0x12a)]),chrome[_0x35a920(0x145)][_0x35a920(0x143)]({'type':'SCAN_ERROR','message':_0x35a920(0x14b)+chrome[_0x35a920(0x145)]['lastError'][_0x35a920(0x12a)]})['catch'](_0x7cc271=>console[_0x35a920(0x138)](_0x35a920(0x134),_0x7cc271['message']))):(console[_0x35a920(0x138)](_0x35a920(0x108)+_0x3338cd+_0x35a920(0x122)),chrome[_0x35a920(0x145)][_0x35a920(0x143)]({'type':_0x35a920(0x17f)})[_0x35a920(0x142)](_0x1b9b97=>console[_0x35a920(0x138)](_0x35a920(0x117),_0x1b9b97[_0x35a920(0x12a)])));}),_0x3e3c23=!![];}else console['error'](_0x3ed5d2(0x105)),_0x54451d({'status':_0x3ed5d2(0x163),'message':_0x3ed5d2(0x110)});break;case _0x3ed5d2(0x149):if(_0x1050da[_0x3ed5d2(0x11f)]&&_0x1050da[_0x3ed5d2(0x11f)]['id']&&_0x1050da[_0x3ed5d2(0x11f)][_0x3ed5d2(0x10f)]){const _0x1d08f5=_0x1050da[_0x3ed5d2(0x11f)]['id'],_0x469cf3=_0x1050da[_0x3ed5d2(0x11f)][_0x3ed5d2(0x10f)],_0x5c63cb=_0x25736a[_0x3ed5d2(0x173)]||[];console[_0x3ed5d2(0x138)](_0x3ed5d2(0x179)+_0x5c63cb[_0x3ed5d2(0x17c)]+'\x20URLs\x20for\x20tab\x20'+_0x1d08f5+'\x20('+_0x469cf3+')'),scanResultsByTab[_0x1d08f5]={'urls':_0x5c63cb,'pageUrl':_0x469cf3,'timestamp':Date[_0x3ed5d2(0x118)]()},chrome[_0x3ed5d2(0x145)][_0x3ed5d2(0x143)]({'type':_0x3ed5d2(0x156),'urls':_0x5c63cb})[_0x3ed5d2(0x142)](_0x2783a1=>console['log'](_0x3ed5d2(0x120),_0x2783a1[_0x3ed5d2(0x12a)]));}else console[_0x3ed5d2(0x163)](_0x3ed5d2(0x176));break;case _0x3ed5d2(0x10c):if(_0x1050da[_0x3ed5d2(0x11f)]&&_0x1050da[_0x3ed5d2(0x11f)]['id']){}console[_0x3ed5d2(0x163)](_0x3ed5d2(0x16e),_0x25736a[_0x3ed5d2(0x12a)]),chrome['runtime']['sendMessage']({'type':_0x3ed5d2(0x13f),'message':_0x25736a['message']||_0x3ed5d2(0x140)})[_0x3ed5d2(0x142)](_0x1fa338=>console[_0x3ed5d2(0x138)](_0x3ed5d2(0x13e),_0x1fa338[_0x3ed5d2(0x12a)]));break;case _0x3ed5d2(0x170):if(_0x25736a[_0x3ed5d2(0x11c)]){const _0x48b6ea=_0x25736a[_0x3ed5d2(0x11c)],_0x23013b=scanResultsByTab[_0x48b6ea];_0x23013b?(chrome[_0x3ed5d2(0x106)][_0x3ed5d2(0x116)](_0x48b6ea,_0x45aea0=>{const _0xe8c3a0=_0x3ed5d2;if(chrome[_0xe8c3a0(0x145)][_0xe8c3a0(0x155)]){console['warn'](_0xe8c3a0(0x15c)+_0x48b6ea+_0xe8c3a0(0x182),chrome[_0xe8c3a0(0x145)][_0xe8c3a0(0x155)][_0xe8c3a0(0x12a)]),clearTabResults(_0x48b6ea),_0x54451d({'status':_0xe8c3a0(0x159),'reason':'Tab\x20inaccessible'});return;}_0x45aea0&&_0x45aea0[_0xe8c3a0(0x10f)]===_0x23013b['pageUrl']?(console['log']('[Persistence]\x20Found\x20valid\x20stored\x20results\x20for\x20tab\x20'+_0x48b6ea+'.'),_0x54451d({'status':_0xe8c3a0(0x14d),'data':_0x23013b})):(console['log'](_0xe8c3a0(0x12e)+_0x48b6ea+_0xe8c3a0(0x183)),clearTabResults(_0x48b6ea),_0x54451d({'status':_0xe8c3a0(0x159),'reason':'URL\x20mismatch'}));}),_0x3e3c23=!![]):(console[_0x3ed5d2(0x138)](_0x3ed5d2(0x177)+_0x48b6ea+'.'),_0x54451d({'status':'not_found','reason':_0x3ed5d2(0x123)}));}else console[_0x3ed5d2(0x163)]('GET_RESULTS_FOR_TAB\x20message\x20missing\x20tabId'),_0x54451d({'status':_0x3ed5d2(0x163),'message':_0x3ed5d2(0x110)});break;case _0x3ed5d2(0x151):if(_0x25736a[_0x3ed5d2(0x10f)]&&typeof _0x25736a['folder']==='string'){const _0x456f75=_0x25736a[_0x3ed5d2(0x10f)],_0x5f4d88=_0x25736a[_0x3ed5d2(0x133)],_0x2740a3=sanitizeFolderName(_0x5f4d88),_0x2b0b0b=generateBaseFilename(_0x456f75),_0x5d05a1=_0x2740a3+'/'+_0x2b0b0b;console['log']('Initiating\x20single\x20download:\x20'+_0x456f75+_0x3ed5d2(0x17d)+_0x5d05a1);try{chrome[_0x3ed5d2(0x121)][_0x3ed5d2(0x178)]({'url':_0x456f75,'filename':_0x5d05a1,'conflictAction':_0x3ed5d2(0x114)},_0xca0fd7=>{const _0x53dcba=_0x3ed5d2;if(chrome[_0x53dcba(0x145)][_0x53dcba(0x155)])console['error'](_0x53dcba(0x160)+_0x5d05a1+':',chrome[_0x53dcba(0x145)][_0x53dcba(0x155)]['message']),_0x54451d({'status':'error','message':chrome[_0x53dcba(0x145)][_0x53dcba(0x155)][_0x53dcba(0x12a)]});else _0xca0fd7!==undefined?(console[_0x53dcba(0x138)](_0x53dcba(0x16f)+_0xca0fd7+_0x53dcba(0x16d)),_0x54451d({'status':_0x53dcba(0x171)})):(console[_0x53dcba(0x163)](_0x53dcba(0x160)+_0x5d05a1+_0x53dcba(0x139)),_0x54451d({'status':_0x53dcba(0x163),'message':'Download\x20initiation\x20failed\x20(no\x20ID).'}));}),_0x3e3c23=!![];}catch(_0x3974d9){console[_0x3ed5d2(0x163)]('Error\x20calling\x20chrome.downloads.download\x20(single):',_0x3974d9),_0x54451d({'status':'error','message':_0x3ed5d2(0x14f)+_0x3974d9[_0x3ed5d2(0x12a)]});}}else console['error'](_0x3ed5d2(0x157)),_0x54451d({'status':_0x3ed5d2(0x163),'message':_0x3ed5d2(0x17e)});break;case _0x3ed5d2(0x129):if(_0x25736a[_0x3ed5d2(0x173)]&&Array['isArray'](_0x25736a[_0x3ed5d2(0x173)])&&_0x25736a['urls'][_0x3ed5d2(0x17c)]>0x0&&typeof _0x25736a[_0x3ed5d2(0x133)]===_0x3ed5d2(0x14e)){const _0x165cae=_0x25736a[_0x3ed5d2(0x173)],_0x7b71c1=_0x25736a[_0x3ed5d2(0x133)],_0x576d6a=sanitizeFolderName(_0x7b71c1);let _0x565d50=0x0,_0x137ce6=0x0;console[_0x3ed5d2(0x138)](_0x3ed5d2(0x130)+_0x165cae[_0x3ed5d2(0x17c)]+_0x3ed5d2(0x169)+_0x576d6a+'\x22.'),_0x165cae[_0x3ed5d2(0x168)]((_0x12e71d,_0x5e8ee)=>{const _0x3fcb9d=_0x3ed5d2;if(!_0x12e71d||typeof _0x12e71d!==_0x3fcb9d(0x14e)){console['warn'](_0x3fcb9d(0x10d)+_0x5e8ee+':',_0x12e71d),_0x137ce6++;return;}try{const _0x483760=generateBaseFilename(_0x12e71d),_0x5c5cfc=_0x576d6a+'/'+_0x483760;chrome[_0x3fcb9d(0x121)][_0x3fcb9d(0x178)]({'url':_0x12e71d,'filename':_0x5c5cfc,'conflictAction':_0x3fcb9d(0x114)},_0x18f9b5=>{const _0x4590a6=_0x3fcb9d;if(chrome['runtime'][_0x4590a6(0x155)])console[_0x4590a6(0x144)](_0x4590a6(0x113)+_0x5c5cfc+_0x4590a6(0x127)+chrome[_0x4590a6(0x145)][_0x4590a6(0x155)][_0x4590a6(0x12a)]);}),_0x565d50++;}catch(_0x3455c8){console[_0x3fcb9d(0x163)](_0x3fcb9d(0x167)+_0x5e8ee+'\x20('+_0x12e71d+'):',_0x3455c8),_0x137ce6++;}}),console[_0x3ed5d2(0x138)](_0x3ed5d2(0x17a)+_0x565d50+'\x20downloads,\x20encountered\x20'+_0x137ce6+_0x3ed5d2(0x109));if(_0x565d50>0x0)_0x54451d({'status':_0x3ed5d2(0x171),'count':_0x565d50});else _0x54451d({'status':_0x3ed5d2(0x163),'message':'Failed\x20to\x20initiate\x20any\x20downloads\x20('+_0x137ce6+_0x3ed5d2(0x10b)});}else console['error'](_0x3ed5d2(0x165)),_0x54451d({'status':_0x3ed5d2(0x163),'message':_0x3ed5d2(0x14a)});break;default:console['log'](_0x3ed5d2(0x17b),_0x25736a['type']);break;}return _0x3e3c23;}),chrome[_0x5140fb(0x106)]['onRemoved'][_0x5140fb(0x16b)]((_0x4c1d96,_0x1dd59b)=>{const _0x281af2=_0x5140fb;console['log']('Tab\x20'+_0x4c1d96+_0x281af2(0x172)),clearTabResults(_0x4c1d96);}),chrome[_0x5140fb(0x106)][_0x5140fb(0x13a)][_0x5140fb(0x16b)]((_0x379acf,_0x5e47a5,_0x338918)=>{const _0xa4aab0=_0x5140fb,_0x3c9f14=scanResultsByTab[_0x379acf];if(!_0x3c9f14)return;(_0x5e47a5[_0xa4aab0(0x10f)]&&_0x5e47a5['url']!==_0x3c9f14[_0xa4aab0(0x16c)]||_0x5e47a5[_0xa4aab0(0x158)]===_0xa4aab0(0x12c)&&_0x338918[_0xa4aab0(0x10f)]&&!isDiscordChannelUrl(_0x338918[_0xa4aab0(0x10f)]))&&(console[_0xa4aab0(0x138)](_0xa4aab0(0x150)+_0x379acf+_0xa4aab0(0x12f)),clearTabResults(_0x379acf));}),chrome[_0x5140fb(0x145)][_0x5140fb(0x12b)][_0x5140fb(0x16b)](()=>{const _0x262baa=_0x5140fb;console[_0x262baa(0x138)]('[LifeCycle]\x20Extension\x20started\x20on\x20browser\x20startup.');}),chrome[_0x5140fb(0x145)][_0x5140fb(0x126)][_0x5140fb(0x16b)](_0x4128b4=>{const _0x1d58c8=_0x5140fb;console['log'](_0x1d58c8(0x131)+_0x4128b4[_0x1d58c8(0x11a)]+_0x1d58c8(0x11d)+chrome[_0x1d58c8(0x145)][_0x1d58c8(0x174)]()[_0x1d58c8(0x119)]);});