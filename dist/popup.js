const _0x581f82=_0x4501;(function(_0x316a1c,_0x31fa85){const _0x52bbb9=_0x4501,_0x450cc9=_0x316a1c();while(!![]){try{const _0xff6e36=-parseInt(_0x52bbb9(0x13d))/0x1*(parseInt(_0x52bbb9(0x11d))/0x2)+-parseInt(_0x52bbb9(0x135))/0x3*(-parseInt(_0x52bbb9(0x152))/0x4)+-parseInt(_0x52bbb9(0x162))/0x5+parseInt(_0x52bbb9(0x165))/0x6+-parseInt(_0x52bbb9(0x114))/0x7+-parseInt(_0x52bbb9(0x142))/0x8*(parseInt(_0x52bbb9(0x132))/0x9)+parseInt(_0x52bbb9(0xfe))/0xa;if(_0xff6e36===_0x31fa85)break;else _0x450cc9['push'](_0x450cc9['shift']());}catch(_0x558a27){_0x450cc9['push'](_0x450cc9['shift']());}}}(_0x4ecd,0x5ddbe));const videoListContainer=document[_0x581f82(0xfa)](_0x581f82(0x14c)),videoListArea=document['getElementById'](_0x581f82(0x111)),loadingOverlay=document[_0x581f82(0xfa)](_0x581f82(0x12e)),downloadAllSection=document[_0x581f82(0xfa)](_0x581f82(0x10e)),totalClipCountSpan=document['getElementById'](_0x581f82(0x141)),scanButton=document[_0x581f82(0xfa)]('scanButton'),folderNameInput=document[_0x581f82(0xfa)](_0x581f82(0x15b)),statusMessage=document[_0x581f82(0xfa)]('statusMessage'),spinner=document['getElementById'](_0x581f82(0xe0)),downloadAllButton=document[_0x581f82(0xfa)]('downloadAllButton'),themeToggle=document['getElementById'](_0x581f82(0x166)),themeIconMoon=document[_0x581f82(0xfa)]('themeIconMoon'),themeIconSun=document[_0x581f82(0xfa)]('themeIconSun'),refreshScanButton=document[_0x581f82(0xfa)](_0x581f82(0x112));let currentClipUrls=[],revealTimeoutId=null,currentTabId=null;const OVERLAY_DELAY_FRESH_SCAN=0x1194,OVERLAY_DELAY_RESTORE=0x258,THEME_STORAGE_KEY='discordClipDownloaderTheme';function getFilenameFromUrl(_0x599314){const _0x501dc1=_0x581f82;try{const _0x2c2a01=new URL(_0x599314),_0x3ae695=_0x2c2a01[_0x501dc1(0x13e)][_0x501dc1(0xd4)]('/');let _0x109820=_0x3ae695[_0x501dc1(0x115)]()||_0x3ae695[_0x501dc1(0x115)]();return decodeURIComponent(_0x109820?.[_0x501dc1(0xd4)]('?')[0x0])||_0x501dc1(0x13a);}catch(_0x4e07d4){return console[_0x501dc1(0x102)](_0x501dc1(0x153),_0x599314,_0x4e07d4),_0x501dc1(0x13a);}}function _0x4501(_0x469430,_0x1512f8){const _0x4ecd69=_0x4ecd();return _0x4501=function(_0x450112,_0x226be6){_0x450112=_0x450112-0xcb;let _0x1060be=_0x4ecd69[_0x450112];return _0x1060be;},_0x4501(_0x469430,_0x1512f8);}function showStatus(_0x20d114,_0x10b0d2=_0x581f82(0xe8),_0x490c7f=![]){const _0x194f5d=_0x581f82;if(!statusMessage||!scanButton||!spinner)return;const _0x5acc7f=_0x194f5d(0xd8)+_0x10b0d2;statusMessage[_0x194f5d(0xea)]=_0x194f5d(0xf0)+_0x5acc7f+_0x194f5d(0x128),statusMessage[_0x194f5d(0x11b)]=_0x20d114,statusMessage[_0x194f5d(0x169)][_0x194f5d(0x109)](_0x194f5d(0x136)),spinner[_0x194f5d(0x169)][_0x194f5d(0x126)]('d-none',!_0x490c7f),scanButton[_0x194f5d(0xee)]('.button-text')?.[_0x194f5d(0x169)][_0x194f5d(0x126)](_0x194f5d(0x136),_0x490c7f),_0x490c7f&&statusMessage[_0x194f5d(0x169)][_0x194f5d(0x150)](_0x194f5d(0x136));}function getTargetFolderName(){const _0x24667d=_0x581f82;if(!folderNameInput)return _0x24667d(0xf2);const _0x3ee4b2=folderNameInput['value']['trim']();return _0x3ee4b2||folderNameInput['placeholder']||_0x24667d(0xf2);}function handleIndividualDownload(_0x1ea00d){const _0x3b0769=_0x581f82,_0x5e14ff=_0x1ea00d[_0x3b0769(0x116)][_0x3b0769(0x146)](_0x3b0769(0xf4));if(!_0x5e14ff)return;const _0x1ac1e6=_0x5e14ff[_0x3b0769(0x13f)][_0x3b0769(0x155)];if(!_0x1ac1e6)return;_0x5e14ff[_0x3b0769(0x16e)]=!![],_0x5e14ff['innerHTML']=_0x3b0769(0xeb);const _0xdee281=getTargetFolderName();typeof chrome!=='undefined'&&chrome[_0x3b0769(0x120)]&&chrome['runtime'][_0x3b0769(0x123)]?chrome[_0x3b0769(0x120)]['sendMessage']({'type':'DOWNLOAD_SINGLE_URL','url':_0x1ac1e6,'folder':_0xdee281},_0x15cb12=>{const _0x4a3238=_0x3b0769,_0x9ca31c=videoListArea?.[_0x4a3238(0xee)](_0x4a3238(0x13c)+_0x1ac1e6+'\x22]');if(!_0x9ca31c)return;_0x15cb12?.[_0x4a3238(0x139)]===_0x4a3238(0x157)?(_0x9ca31c[_0x4a3238(0x11b)]=_0x4a3238(0x15f),_0x9ca31c[_0x4a3238(0x169)]['remove'](_0x4a3238(0x101)),_0x9ca31c[_0x4a3238(0x169)][_0x4a3238(0x150)](_0x4a3238(0xe5))):(_0x9ca31c[_0x4a3238(0x11b)]=_0x4a3238(0x158),_0x9ca31c['classList'][_0x4a3238(0x109)]('btn-success'),_0x9ca31c['classList']['add']('btn-danger'),_0x9ca31c[_0x4a3238(0x16e)]=![],console[_0x4a3238(0x102)](_0x4a3238(0xf9),_0x15cb12?.[_0x4a3238(0x102)]),showStatus(_0x4a3238(0x122)+getFilenameFromUrl(_0x1ac1e6)+'.\x20'+(_0x15cb12?.[_0x4a3238(0x102)]||''),_0x4a3238(0x16a)));}):(console[_0x3b0769(0x102)](_0x3b0769(0xff)),_0x5e14ff['textContent']='Error',_0x5e14ff[_0x3b0769(0x169)][_0x3b0769(0x109)](_0x3b0769(0x101)),_0x5e14ff['classList'][_0x3b0769(0x150)](_0x3b0769(0xe3)),showStatus(_0x3b0769(0x106),_0x3b0769(0x16a)));}function resetUI(_0x2edfc5=!![]){const _0x535e4f=_0x581f82;console[_0x535e4f(0x110)]('Resetting\x20UI.\x20Show\x20initial\x20message:',_0x2edfc5),clearTimeout(revealTimeoutId);if(scanButton)scanButton[_0x535e4f(0x16e)]=![];if(refreshScanButton)refreshScanButton[_0x535e4f(0x16e)]=![];downloadAllButton&&(downloadAllButton[_0x535e4f(0x16e)]=![],downloadAllButton[_0x535e4f(0x11b)]=_0x535e4f(0x117));if(spinner)spinner[_0x535e4f(0x169)]['add'](_0x535e4f(0x136));scanButton?.[_0x535e4f(0xee)]('.button-text')?.['classList'][_0x535e4f(0x109)](_0x535e4f(0x136));if(videoListArea)videoListArea[_0x535e4f(0x107)]='';videoListContainer?.['classList'][_0x535e4f(0x150)](_0x535e4f(0x136)),loadingOverlay?.[_0x535e4f(0x169)][_0x535e4f(0x109)](_0x535e4f(0xe9)),downloadAllSection?.['classList']['add'](_0x535e4f(0x136));if(totalClipCountSpan)totalClipCountSpan[_0x535e4f(0x11b)]='0';currentClipUrls=[];if(_0x2edfc5&&statusMessage)showStatus(_0x535e4f(0x133),_0x535e4f(0x151));else statusMessage&&statusMessage['classList']['add'](_0x535e4f(0x136));}function populateUI(_0xdaaa43,_0x376275=0x0){const _0x1ec8a1=_0x581f82;console[_0x1ec8a1(0x110)](_0x1ec8a1(0x130)+_0xdaaa43['length']+_0x1ec8a1(0xe6)+_0x376275+'ms'),currentClipUrls=_0xdaaa43;if(!videoListArea||!videoListContainer||!downloadAllSection||!totalClipCountSpan||!loadingOverlay){console['error'](_0x1ec8a1(0xfc));return;}videoListArea[_0x1ec8a1(0x107)]='';if(!Array[_0x1ec8a1(0x164)](_0xdaaa43)||_0xdaaa43['length']===0x0){resetUI(![]),showStatus(_0x1ec8a1(0xf5),_0x1ec8a1(0x10c));if(scanButton)scanButton['disabled']=![];if(refreshScanButton)refreshScanButton[_0x1ec8a1(0x16e)]=![];return;}showStatus(_0x1ec8a1(0x160)+_0xdaaa43[_0x1ec8a1(0xdb)]+_0x1ec8a1(0xfb),_0x1ec8a1(0xe8),![]);const _0x3c4a9f=document[_0x1ec8a1(0xd0)]();_0xdaaa43[_0x1ec8a1(0xf6)](_0x2057ea=>{const _0x3670ee=_0x1ec8a1,_0xa9f134=document[_0x3670ee(0x149)](_0x3670ee(0xcf));_0xa9f134[_0x3670ee(0xea)]=_0x3670ee(0xdc);const _0x20fa30=document['createElement'](_0x3670ee(0xcf));_0x20fa30[_0x3670ee(0xea)]='d-flex\x20align-items-center\x20me-2',_0x20fa30[_0x3670ee(0xf1)][_0x3670ee(0x15d)]='0',_0x20fa30[_0x3670ee(0xf1)][_0x3670ee(0x104)]='1';const _0x1c0d7d=document[_0x3670ee(0x149)](_0x3670ee(0xcd));_0x1c0d7d[_0x3670ee(0x131)]=_0x2057ea,_0x1c0d7d[_0x3670ee(0x15a)]=0x50,_0x1c0d7d[_0x3670ee(0xed)]=0x2d,_0x1c0d7d[_0x3670ee(0x16b)]=!![],_0x1c0d7d[_0x3670ee(0x156)]=_0x3670ee(0x16c);let _0x2afd31;const _0x4e1617=_0x376275<=0x0;_0xa9f134['addEventListener']('mouseenter',()=>{const _0x4c489f=_0x3670ee;(_0x4e1617||!loadingOverlay[_0x4c489f(0x169)]['contains'](_0x4c489f(0xe9)))&&(_0x1c0d7d['currentTime']=0x0,_0x1c0d7d[_0x4c489f(0x144)]()[_0x4c489f(0x12f)](()=>{}),clearTimeout(_0x2afd31),_0x2afd31=setTimeout(()=>_0x1c0d7d[_0x4c489f(0xd3)](),0x5dc));}),_0xa9f134[_0x3670ee(0x167)]('mouseleave',()=>{const _0x29c031=_0x3670ee;(_0x4e1617||!loadingOverlay[_0x29c031(0x169)][_0x29c031(0xe1)](_0x29c031(0xe9)))&&(clearTimeout(_0x2afd31),_0x1c0d7d[_0x29c031(0xd3)](),_0x1c0d7d[_0x29c031(0x129)]=0x0);});const _0x45145f=document[_0x3670ee(0x149)](_0x3670ee(0x125));_0x45145f['className']=_0x3670ee(0x12a);const _0x34fe94=getFilenameFromUrl(_0x2057ea);_0x45145f[_0x3670ee(0x11b)]=_0x34fe94,_0x45145f[_0x3670ee(0xda)]=_0x34fe94;const _0x5db896=document[_0x3670ee(0x149)](_0x3670ee(0xf4));_0x5db896['className']='btn\x20btn-sm\x20btn-download-single',_0x5db896[_0x3670ee(0x169)][_0x3670ee(0x150)](_0x3670ee(0x101)),_0x5db896[_0x3670ee(0x11b)]=_0x3670ee(0xfd),_0x5db896[_0x3670ee(0x13f)]['url']=_0x2057ea,_0x5db896['addEventListener'](_0x3670ee(0x14b),handleIndividualDownload),_0x20fa30[_0x3670ee(0x118)](_0x1c0d7d),_0x20fa30[_0x3670ee(0x118)](_0x45145f),_0xa9f134[_0x3670ee(0x118)](_0x20fa30),_0xa9f134[_0x3670ee(0x118)](_0x5db896),_0x3c4a9f[_0x3670ee(0x118)](_0xa9f134);}),videoListArea[_0x1ec8a1(0x118)](_0x3c4a9f),videoListContainer[_0x1ec8a1(0x169)][_0x1ec8a1(0x109)](_0x1ec8a1(0x136)),downloadAllSection['classList'][_0x1ec8a1(0x109)](_0x1ec8a1(0x136)),totalClipCountSpan[_0x1ec8a1(0x11b)]=_0xdaaa43['length'];if(scanButton)scanButton[_0x1ec8a1(0x16e)]=![];if(refreshScanButton)refreshScanButton[_0x1ec8a1(0x16e)]=![];if(downloadAllButton)downloadAllButton[_0x1ec8a1(0x16e)]=![];_0x376275>0x0?(loadingOverlay[_0x1ec8a1(0x169)]['add']('active'),showStatus(_0x1ec8a1(0x100)+_0xdaaa43[_0x1ec8a1(0xdb)]+_0x1ec8a1(0xe4),_0x1ec8a1(0xe8),![]),clearTimeout(revealTimeoutId),revealTimeoutId=setTimeout(()=>{const _0xc00508=_0x1ec8a1;loadingOverlay[_0xc00508(0x169)]['remove'](_0xc00508(0xe9)),showStatus('Found\x20'+_0xdaaa43[_0xc00508(0xdb)]+_0xc00508(0x14a),'success',![]);},_0x376275)):(loadingOverlay['classList'][_0x1ec8a1(0x109)](_0x1ec8a1(0xe9)),showStatus(_0x1ec8a1(0x121)+_0xdaaa43[_0x1ec8a1(0xdb)]+_0x1ec8a1(0x14a),_0x1ec8a1(0x157),![]));}function applyTheme(_0x5d77b3){const _0x388a78=_0x581f82,_0x2ac1e9=document[_0x388a78(0x154)];if(!_0x2ac1e9||!themeIconMoon||!themeIconSun||!themeToggle){console[_0x388a78(0x10f)](_0x388a78(0x137));return;}_0x5d77b3==='dark'?(_0x2ac1e9['classList'][_0x388a78(0x150)](_0x388a78(0x140)),themeIconMoon[_0x388a78(0x169)]['add']('d-none'),themeIconSun['classList'][_0x388a78(0x109)](_0x388a78(0x136)),themeToggle[_0x388a78(0x12b)](_0x388a78(0xda),_0x388a78(0xec))):(_0x2ac1e9['classList'][_0x388a78(0x109)](_0x388a78(0x140)),themeIconMoon['classList'][_0x388a78(0x109)](_0x388a78(0x136)),themeIconSun['classList'][_0x388a78(0x150)]('d-none'),themeToggle[_0x388a78(0x12b)](_0x388a78(0xda),_0x388a78(0x113)));}function handleThemeToggle(){const _0xaaa664=_0x581f82,_0xa6aee1=document[_0xaaa664(0x154)][_0xaaa664(0x169)][_0xaaa664(0xe1)]('dark-mode'),_0x9a353f=_0xa6aee1?_0xaaa664(0x151):_0xaaa664(0x145);applyTheme(_0x9a353f),typeof chrome!=='undefined'&&chrome[_0xaaa664(0x168)]&&chrome['storage'][_0xaaa664(0x105)]?chrome[_0xaaa664(0x168)][_0xaaa664(0x105)][_0xaaa664(0xe7)]({[THEME_STORAGE_KEY]:_0x9a353f},()=>{const _0x1248d8=_0xaaa664;if(chrome[_0x1248d8(0x120)]['lastError'])console['error'](_0x1248d8(0x159),chrome[_0x1248d8(0x120)][_0x1248d8(0xce)]);else{}}):console[_0xaaa664(0x10f)](_0xaaa664(0xef));}function loadAndApplyTheme(){return new Promise(_0x4e4bdc=>{const _0x5aa74c=_0x4501;if(typeof chrome==='undefined'||!chrome[_0x5aa74c(0x168)]||!chrome[_0x5aa74c(0x168)][_0x5aa74c(0x105)]){console[_0x5aa74c(0x10f)]('Chrome\x20storage\x20API\x20not\x20available.\x20Defaulting\x20to\x20light\x20theme.'),applyTheme(_0x5aa74c(0x151)),_0x4e4bdc();return;}chrome[_0x5aa74c(0x168)][_0x5aa74c(0x105)]['get'](THEME_STORAGE_KEY,_0x33e46f=>{const _0x812ac6=_0x5aa74c;if(chrome[_0x812ac6(0x120)]['lastError'])console['error']('Error\x20loading\x20theme\x20preference:',chrome['runtime']['lastError']),applyTheme(_0x812ac6(0x151));else{const _0x55ea2b=_0x33e46f[THEME_STORAGE_KEY]===_0x812ac6(0x145)?_0x812ac6(0x145):'light';applyTheme(_0x55ea2b);}_0x4e4bdc();});});}function setupEventListeners(){const _0x412a91=_0x581f82;scanButton?.['addEventListener'](_0x412a91(0x14b),()=>{const _0x562348=_0x412a91;if(!currentTabId){showStatus(_0x562348(0x103),_0x562348(0x16a));return;}resetUI(![]);if(scanButton)scanButton[_0x562348(0x16e)]=!![];if(refreshScanButton)refreshScanButton[_0x562348(0x16e)]=!![];showStatus(_0x562348(0x124),'info',!![]);if(typeof chrome!==_0x562348(0x10b)&&chrome[_0x562348(0x120)]&&chrome[_0x562348(0x120)][_0x562348(0x123)])chrome[_0x562348(0x120)][_0x562348(0x123)]({'type':_0x562348(0x11c),'tabId':currentTabId});else{showStatus(_0x562348(0xcb),_0x562348(0x16a));if(scanButton)scanButton[_0x562348(0x16e)]=![];if(refreshScanButton)refreshScanButton['disabled']=![];}}),refreshScanButton?.['addEventListener'](_0x412a91(0x14b),()=>{scanButton?.['click']();}),themeToggle?.[_0x412a91(0x167)](_0x412a91(0x14b),handleThemeToggle),downloadAllButton?.[_0x412a91(0x167)](_0x412a91(0x14b),()=>{const _0xaa8a02=_0x412a91;if(currentClipUrls[_0xaa8a02(0xdb)]===0x0){showStatus('No\x20clips\x20to\x20download.',_0xaa8a02(0x10c));return;}downloadAllButton[_0xaa8a02(0x16e)]=!![],downloadAllButton[_0xaa8a02(0x11b)]=_0xaa8a02(0x12d)+currentClipUrls[_0xaa8a02(0xdb)]+'...',showStatus(_0xaa8a02(0x147)+currentClipUrls[_0xaa8a02(0xdb)]+_0xaa8a02(0xd7),_0xaa8a02(0xe8));const _0x8f9a72=getTargetFolderName();typeof chrome!==_0xaa8a02(0x10b)&&chrome[_0xaa8a02(0x120)]&&chrome[_0xaa8a02(0x120)][_0xaa8a02(0x123)]?chrome[_0xaa8a02(0x120)][_0xaa8a02(0x123)]({'type':_0xaa8a02(0x13b),'urls':currentClipUrls,'folder':_0x8f9a72},_0xf98366=>{const _0x4fe927=_0xaa8a02;downloadAllButton[_0x4fe927(0x16e)]=![],downloadAllButton[_0x4fe927(0x11b)]=_0x4fe927(0x117);if(_0xf98366?.[_0x4fe927(0x139)]===_0x4fe927(0x157)){const _0x18727b=_0xf98366[_0x4fe927(0xf3)]||currentClipUrls['length'];showStatus('Download\x20started\x20for\x20'+_0x18727b+_0x4fe927(0xf7),_0x4fe927(0x157)),videoListArea?.[_0x4fe927(0x11e)](_0x4fe927(0x14f))[_0x4fe927(0xf6)](_0x49f17f=>{const _0x7896a5=_0x4fe927;_0x49f17f[_0x7896a5(0x11b)]=_0x7896a5(0x15f),_0x49f17f[_0x7896a5(0x169)][_0x7896a5(0x109)](_0x7896a5(0x101)),_0x49f17f[_0x7896a5(0x169)][_0x7896a5(0x150)](_0x7896a5(0xe5)),_0x49f17f['disabled']=!![];});}else showStatus(_0x4fe927(0xd1)+(_0xf98366?.[_0x4fe927(0x102)]||_0x4fe927(0x12c)),_0x4fe927(0x16a));}):(console[_0xaa8a02(0x102)](_0xaa8a02(0x10d)),downloadAllButton['disabled']=![],downloadAllButton[_0xaa8a02(0x11b)]='Download\x20All',showStatus(_0xaa8a02(0x106),_0xaa8a02(0x16a)));}),typeof chrome!==_0x412a91(0x10b)&&chrome[_0x412a91(0x120)]&&chrome[_0x412a91(0x120)][_0x412a91(0x134)]&&chrome['runtime'][_0x412a91(0x134)]['addListener']((_0x7ffdac,_0x3b88c3,_0x535f16)=>{const _0x112db1=_0x412a91;console[_0x112db1(0x110)](_0x112db1(0xcc),_0x7ffdac['type']);switch(_0x7ffdac['type']){case _0x112db1(0x16d):populateUI(_0x7ffdac['urls']||[],OVERLAY_DELAY_FRESH_SCAN);break;case _0x112db1(0xd5):showStatus(_0x112db1(0x148)+(_0x7ffdac[_0x112db1(0x127)]||_0x112db1(0xd6)),_0x112db1(0x16a)),resetUI(![]);if(scanButton)scanButton['disabled']=![];if(refreshScanButton)refreshScanButton['disabled']=![];break;case _0x112db1(0xe2):showStatus('Scanning\x20page\x20for\x20clips...',_0x112db1(0xe8),!![]);break;}});}function _0x4ecd(){const _0x50b09c=['Building\x20list\x20for\x20','Initializing\x20popup\x20content...','1400415sAXIrh','Error\x20querying\x20tabs:','isArray','1317438ipSEkT','themeToggle','addEventListener','storage','classList','danger','muted','metadata','SCAN_COMPLETE','disabled','GET_RESULTS_FOR_TAB','Extension\x20context\x20error.','Popup\x20received\x20message:','video','lastError','div','createDocumentFragment','Failed\x20to\x20start\x20\x27Download\x20All\x27:\x20','DOMContentLoaded','pause','split','SCAN_ERROR','Unknown\x20scan\x20error','\x20clips...','alert-','Loading\x20results...','title','length','list-group-item\x20d-flex\x20align-items-center\x20justify-content-between\x20p-2\x20flex-shrink-0','urls','Not\x20a\x20Discord\x20channel\x20page.','reason','spinner','contains','SCAN_STARTED','btn-danger','\x20previews...','btn-secondary','\x20URLs.\x20Overlay\x20delay:\x20','set','info','active','className','<span\x20class=\x22spinner-border\x20spinner-border-sm\x22\x20role=\x22status\x22\x20aria-hidden=\x22true\x22></span>','Switch\x20to\x20Light\x20Mode','height','querySelector','Chrome\x20storage\x20API\x20not\x20available.\x20Theme\x20preference\x20not\x20saved.','alert\x20','style','DiscordClips','count','button','Scan\x20found\x200\x20clips.','forEach','\x20clips.\x20Check\x20browser\x20downloads.','Error\x20accessing\x20tab\x20information.','Download\x20failed:','getElementById','\x20clip(s)...','One\x20or\x20more\x20UI\x20elements\x20missing\x20for\x20populateUI.','Download','18520440RXHlLU','Chrome\x20runtime\x20context\x20not\x20available\x20for\x20download.','Loading\x20','btn-success','error','Could\x20not\x20get\x20active\x20tab\x20ID.','flexGrow','local','Cannot\x20initiate\x20download:\x20Extension\x20context\x20error.','innerHTML','Error\x20requesting\x20stored\x20results:','remove','No\x20valid\x20stored\x20results\x20found\x20(Status:\x20','undefined','warning','Chrome\x20runtime\x20context\x20not\x20available\x20for\x20download\x20all.','downloadAllSection','warn','log','videoListArea','refreshScanButton','Switch\x20to\x20Dark\x20Mode','4032630HEnvyI','pop','target','Download\x20All','appendChild','Found\x20stored\x20results.\x20Populating\x20UI\x20with\x20short\x20overlay.','data','textContent','START_SCAN','29590YMvjCV','querySelectorAll',').\x20Ready\x20to\x20scan.','runtime','Found\x20','Failed\x20to\x20download\x20','sendMessage','Starting\x20scan...','span','toggle','message','\x20mb-2\x20status-message','currentTime','clip-name','setAttribute','Unknown\x20error','Starting\x20','loadingOverlay','catch','Populating\x20UI\x20with\x20','src','116631aYpmYf','Scan\x20or\x20refresh\x20to\x20find\x20clips.','onMessage','40380kBWHYk','d-none','Theme\x20elements\x20not\x20found,\x20cannot\x20apply\x20theme.','discord.com/channels/','status','unknown_clip','DOWNLOAD_ALL_URLS','button[data-url=\x22','49OGTdcK','pathname','dataset','dark-mode','totalClipCount','456JsAdTG','Error:\x20Extension\x20context\x20lost.','play','dark','closest','Initiating\x20download\x20of\x20','Error:\x20','createElement','\x20clips.\x20Ready!','click','videoListContainer','query','tabs','.btn-download-single:not(.btn-secondary):not(.btn-danger)','add','light','188uKzFft','Error\x20parsing\x20URL\x20for\x20filename:','body','url','preload','success','Failed','Error\x20saving\x20theme\x20preference:','width','folderNameInput','Chrome\x20APIs\x20not\x20available.','minWidth','Cannot\x20access\x20current\x20tab\x20info.','Done'];_0x4ecd=function(){return _0x50b09c;};return _0x4ecd();}async function initializePopup(){const _0x16591c=_0x581f82;console['log'](_0x16591c(0x161));let _0x2dfad3;if(typeof chrome===_0x16591c(0x10b)||!chrome[_0x16591c(0x14e)]||!chrome['runtime']){console[_0x16591c(0x102)](_0x16591c(0x15c)),resetUI(![]),showStatus(_0x16591c(0x143),_0x16591c(0x16a));if(scanButton)scanButton[_0x16591c(0x16e)]=!![];if(refreshScanButton)refreshScanButton[_0x16591c(0x16e)]=!![];if(downloadAllButton)downloadAllButton[_0x16591c(0x16e)]=!![];return;}try{[_0x2dfad3]=await chrome[_0x16591c(0x14e)][_0x16591c(0x14d)]({'active':!![],'currentWindow':!![]});}catch(_0x22d931){console['error'](_0x16591c(0x163),_0x22d931),resetUI(![]),showStatus(_0x16591c(0xf8),_0x16591c(0x16a));return;}if(!_0x2dfad3?.['id']||!_0x2dfad3[_0x16591c(0x155)]){console[_0x16591c(0x102)]('Could\x20not\x20get\x20active\x20tab\x20info.'),resetUI(![]),showStatus(_0x16591c(0x15e),_0x16591c(0x16a));return;}currentTabId=_0x2dfad3['id'];if(!_0x2dfad3[_0x16591c(0x155)]['includes'](_0x16591c(0x138))){console[_0x16591c(0x110)](_0x16591c(0xde)),resetUI(!![]);if(scanButton)scanButton['disabled']=!![];if(refreshScanButton)refreshScanButton[_0x16591c(0x16e)]=!![];return;}if(scanButton)scanButton[_0x16591c(0x16e)]=![];if(refreshScanButton)refreshScanButton[_0x16591c(0x16e)]=![];console[_0x16591c(0x110)]('Requesting\x20stored\x20results\x20for\x20tab\x20'+currentTabId),showStatus(_0x16591c(0xd9),_0x16591c(0xe8)),chrome[_0x16591c(0x120)][_0x16591c(0x123)]({'type':_0x16591c(0x16f),'tabId':currentTabId},_0x3df4d6=>{const _0x1b61ef=_0x16591c;if(chrome[_0x1b61ef(0x120)][_0x1b61ef(0xce)]){console[_0x1b61ef(0x10f)](_0x1b61ef(0x108),chrome[_0x1b61ef(0x120)][_0x1b61ef(0xce)]['message']),resetUI(!![]);return;}_0x3df4d6?.['status']==='found'&&Array[_0x1b61ef(0x164)](_0x3df4d6[_0x1b61ef(0x11a)]?.[_0x1b61ef(0xdd)])?(console[_0x1b61ef(0x110)](_0x1b61ef(0x119)),populateUI(_0x3df4d6[_0x1b61ef(0x11a)]['urls'],OVERLAY_DELAY_RESTORE)):(console[_0x1b61ef(0x110)](_0x1b61ef(0x10a)+_0x3df4d6?.[_0x1b61ef(0x139)]+',\x20Reason:\x20'+_0x3df4d6?.[_0x1b61ef(0xdf)]+_0x1b61ef(0x11f)),resetUI(!![]));});}document[_0x581f82(0x167)](_0x581f82(0xd2),async()=>{await loadAndApplyTheme(),setupEventListeners(),initializePopup();});